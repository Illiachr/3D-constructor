/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,o,c,a,r,i,l,s,u,m,d,v,f,p,h,y,g,L=function(e,t,n){var o=document.createElement(n),c=document.querySelector(t);return o.classList.add(e),c.append(o),o},q=function(e,t){var n,o=Math.round(e/10/2),c=0;t.textContent=0,n=requestAnimationFrame((function a(){c<=e?(t.textContent=c,n=requestAnimationFrame(a),c+=o):(t.textContent=e,cancelAnimationFrame(n))}))},S=function(e){var t=document.getElementById(e),n=document.createElement("h3"),o=document.createElement("div");o.classList.add("loader"),n.classList.add("status-msg"),t.addEventListener("input",(function(e){var n=e.target;t.elements.user_email.setCustomValidity("Заполните, пожалуйста это поле!"),n.matches("input[name=user_name]")&&(n.value=n.value.replace(/[^аА-яёЯЁ ]/,"")),n.matches("input[name=user_phone]")&&(n.value=n.value.replace(/[^+\d]/,"")),n.matches("input[name=user_email]")&&(n.value=n.value.replace(/[^a-z-0-9@.]/i,""),n.setCustomValidity("")),n.matches("input[name=user_message]")&&(n.value=n.value.replace(/[^аА-яёЯЁ .,?!]/i,""))})),t.addEventListener("submit",(function(e){if(e.preventDefault(),""!==t.elements.user_email.value){var c,a=new FormData(t),r={};t.elements.user_email.setCustomValidity(""),t.appendChild(o),t.appendChild(n),o.classList.add("active"),a.forEach((function(e,t){return r[t]=e})),(c=r,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).then((function(e){if(o.classList.remove("active"),200!==e.status)throw new Error("status network not 200");n.classList.add("active"),n.textContent="Спасибо! Мы скоро с Вами свяжемся"})).catch((function(e){n.classList.add("active"),n.textContent="Что-то пошло не так...",console.error(e)})).finally((function(){t.reset(),setTimeout((function(){n.classList.remove("active"),e.target.closest(".popup")&&(e.target.closest(".popup").style.display="none")}),2e3)}))}}))};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"7 january 2021",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#timer-hours",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#timer-minutes",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#timer-seconds",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".timer-action",a=function(e){return e<10?"0".concat(e):e},r=document.querySelector(t),i=document.querySelector(n),l=document.querySelector(o),s=document.querySelector(c),u=function(){var t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeToStop:t,hours:Math.floor(t/60/60),minutes:o,seconds:n}},m=function e(){var t=u();r.textContent=a(t.hours),i.textContent=a(t.minutes),l.textContent=a(t.seconds),t.timeToStop<0?(s.textContent="Акция завершилась",r.textContent="00",i.textContent="00",l.textContent="00",clearInterval()):setInterval(e,1e3)};m()}(),e=document.querySelector(".menu"),t=document.querySelector("menu"),n=function(){t.classList.toggle("active-menu"),t.classList.contains("active-menu")?e.style.display="none":e.style.display="block"},document.querySelector("html").addEventListener("click",(function(e){var o=e.target;if(o.classList.contains("close-btn")&&n(),t.classList.contains("active-menu")&&!o.classList.contains("active-menu")&&n(),o.closest(".menu")&&n(),o.closest('main a[href="#service-block"]')){e.preventDefault();var c=o.closest('main a[href="#service-block"]').getAttribute("href");document.querySelector(c).scrollIntoView({behavior:"smooth",block:"center"})}if(o.closest("menu li")){e.preventDefault();var a=o.closest("menu li a").getAttribute("href");document.querySelector(a).scrollIntoView({behavior:"smooth",block:"center"})}})),o=document.querySelector(".popup"),c=document.querySelector(".popup-content"),document.querySelectorAll(".popup-btn").forEach((function(e){return e.addEventListener("click",(function(){var e,t,n,a;o.style.display="block",screen.width>=768&&(e=c,t=function(e,t,n){return e.style.top="".concat(t,"%"),t+Math.floor(n/50)},10,n=null,a=-65,requestAnimationFrame((function o(r){n||(n=r),(a=t(e,a,r-n))<=10?requestAnimationFrame(o):c.removeAttribute("style")})))}))})),o.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")&&(o.style.display="none"),(t=t.closest(".popup-content"))||(o.style.display="none")})),h=document.querySelector(".service-header"),y=document.querySelectorAll(".service-header-tab"),g=document.querySelectorAll(".service-tab"),h.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&y.forEach((function(e,n){e===t&&function(e){for(var t=0;t<g.length;t++)e===t?(y[t].classList.add("active"),g[t].classList.remove("d-none")):(y[t].classList.remove("active"),g[t].classList.add("d-none"))}(n)}))})),i=document.querySelectorAll(".portfolio-item"),l=document.querySelector(".portfolio-content"),s=function(e,t,n,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"li",a=document.querySelectorAll(t);L(o,e,"ul");for(var r=0;r<a.length;r++)L(n,".".concat(o),c);var i=document.querySelectorAll(".".concat(n));return i[0].classList.add("".concat(n,"-active")),i}(".portfolio-content",".portfolio-item","dot","portfolio-dots"),u=0,m=0,d=function(e,t,n){e[t].classList.remove(n)},v=function(e,t,n){e[t].classList.add(n)},f=function(){d(i,u,"portfolio-item-active"),d(s,u,"dot-active"),++u>=i.length&&(u=0),v(i,u,"portfolio-item-active"),v(s,u,"dot-active")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;m=setInterval(f,e)},l.addEventListener("click",(function(e){e.preventDefault();var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&(d(i,u,"portfolio-item-active"),d(s,u,"dot-active"),t.matches("#arrow-right")?u++:t.matches("#arrow-left")?u--:t.matches(".dot")&&s.forEach((function(e,n){e===t&&(u=n)})),u>=i.length&&(u=0),u<0&&(u=i.length-1),v(i,u,"portfolio-item-active"),v(s,u,"dot-active"))})),l.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(m)})),l.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&p()})),p(1500),(r=document.getElementById("command")).addEventListener("mouseover",(function(e){e.target.matches(".command__photo")&&(a=e.target.src,e.target.src=e.target.dataset.img)})),r.addEventListener("mouseout",(function(e){e.target.matches(".command__photo")&&(e.target.src=a)})),document.querySelector(".calc-block").addEventListener("input",(function(e){e.target.matches(".calc-block input[type=text]")&&(e.target.value=e.target.value.replace(/\D/,""))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),r=document.getElementById("total"),i=function(){var t=0,i=1,l=1,s=+n.value,u=+o.value;c.value>1&&(i+=(c.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),s&&u&&(t=Math.ceil(e*s*u*i*l)),t>0?q(t,r):r.textContent=t};t.addEventListener("change",(function(e){(e.target.matches("select")||e.target.matches("input"))&&i()}))}(100),S("form1"),S("form2"),S("form3")})();